{% extends 'base.html' %}

{% block title %}
  ç½‘å€å¯¼èˆª
{% endblock %}

{% block styles %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}" />
{% endblock %}

{% block content %}
  <div class="dashboard-container">
    <!-- ä¾§è¾¹æ  -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="logo">Z</div>
        <h2>ZZH-Tool</h2>
      </div>

      <nav class="sidebar-nav">
        <ul>
          <li>
            <a href="#" class="nav-item">
              <i class="fas fa-home"></i>
              <span>ä»ªè¡¨ç›˜é¦–é¡µ</span>
            </a>
          </li>
          <li>
            <a href="#" class="nav-item">
              <i class="fas fa-cloud"></i>
              <span>ä¸ªäººç½‘ç›˜</span>
            </a>
          </li>
          <li>
            <a href="http://zhenghao.x3322.net:38083" class="nav-item">
              <i class="fas fa-chart-bar"></i>
              <span>åœ¨çº¿é˜…è¯»</span>
            </a>
          </li>
          <li>
            <a href="/chat" class="nav-item">
              <i class="fas fa-comments"></i>
              <span>åœ¨çº¿èŠå¤©</span>
            </a>
          </li>
          <li>
            <a href="/video_parse" class="nav-item">
              <i class="fas fa-video"></i>
              <span>Bç«™è§†é¢‘è§£æ</span>
            </a>
          </li>
          <li>
            <a href="#" class="nav-item">
              <i class="fas fa-gamepad"></i>
              <span>å°æ¸¸æˆåˆé›†</span>
            </a>
          </li>
          <li>
            <a href="/file_converter" class="nav-item">
              <i class="fas fa-file-contract"></i>
              <span>æ–‡ä»¶æ ¼å¼è½¬æ¢</span>
            </a>
          </li>
        </ul>
      </nav>

      <div class="sidebar-footer">
        <p>å½“å‰ç‰ˆæœ¬: {{ version }}</p>
        <p>å¼€å‘è€…: {{ developer }}</p>
        <p>è”ç³»QQ: 393994653</p>
        <p>Githubä»“åº“: <a href="https://github.com/393994653/ZZH-Tool">ZZH-Tool</a></p>
        <p>Â© 2025 å¼€å‘è€…ä»ªè¡¨ç›˜</p>
      </div>
    </aside>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="main-content" id="mainContent">
      <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
      <header class="top-navbar">
        <div class="left-section">
          <button class="sidebar-toggle" id="headerToggleBtn">
            <i class="fas fa-chevron-left"></i>
          </button>
          <h1>ä»ªè¡¨ç›˜</h1>
        </div>

        <div class="right-section">
          <div class="user-dropdown" id="userDropdown">
            <div class="user-info" id="userInfo">
              <!-- ä¿®æ”¹è¿™é‡Œï¼šæ ¹æ®å¤´åƒä¿¡æ¯æ˜¾ç¤ºå¤´åƒ -->
              {% if user_info.avatar %}
                <img src="{{ url_for('get_avatar', filename=user_info.avatar) }}" alt="å¤´åƒ" class="user-avatar-img">
              {% else %}
                <div class="user-avatar-text">{{ user_info.username|first|upper }}</div>
              {% endif %}
              <span>{{ user_info.username }}</span>
              <i class="fas fa-chevron-down"></i>
            </div>

            <div class="dropdown-menu" id="dropdownMenu">
              <div class="dropdown-header">
                <!-- ä¿®æ”¹è¿™é‡Œï¼šæ ¹æ®å¤´åƒä¿¡æ¯æ˜¾ç¤ºå¤´åƒ -->
                {% if user_info.avatar %}
                  <img src="{{ url_for('get_avatar', filename=user_info.avatar) }}" alt="å¤´åƒ" class="dropdown-avatar-img">
                {% else %}
                  <div class="dropdown-avatar-text">{{ user_info.username|first|upper }}</div>
                {% endif %}
                <div>
                  <h3>{{ user_info.username }}</h3>
                  <p>{{ user_info.email }}</p>
                </div>
              </div>

              <div class="dropdown-divider"></div>

              <a href="/profile" class="dropdown-item">
                <i class="fas fa-user"></i>
                <span>ä¸ªäººèµ„æ–™</span>
              </a>

              <a href="/account_settings" class="dropdown-item">
                <i class="fas fa-cog"></i>
                <span>è´¦æˆ·è®¾ç½®</span>
              </a>

              <a href="/security_settings" class="dropdown-item">
                <i class="fas fa-shield-alt"></i>
                <span>å®‰å…¨è®¾ç½®</span>
              </a>

              <div class="dropdown-divider"></div>

              <a href="/logout" class="dropdown-item logout">
                <i class="fas fa-sign-out-alt"></i>
                <span>é€€å‡ºç™»å½•</span>
              </a>
            </div>
          </div>
        </div>
      </header>

      <!-- ä»ªè¡¨ç›˜å†…å®¹ -->
      <div class="dashboard-content">
        <div class="welcome-card">
          <div class="welcome-text">
            <h2>æ¬¢è¿å›æ¥, {{ user_info.username }}!</h2>
            <p>ä»Šå¤©æ˜¯ {{ current_date }}</p>
            <div class="quick-stats">
              <div class="stat-item">
                <div class="stat-icon">ğŸ“</div>
                <div>
                  <p>æ–‡ä»¶æ•°é‡</p>
                  <strong>{{ file_number }}</strong>
                </div>
              </div>
              <div class="stat-item">
                <div class="stat-icon">ğŸ’¬</div>
                <div>
                  <p>æœªè¯»æ¶ˆæ¯</p>
                  <strong>{{ unread_number }}</strong>
                </div>
              </div>
              <div class="stat-item">
                <div class="stat-icon">ğŸ®</div>
                <div>
                  <p>æ¸¸æˆè®°å½•</p>
                  <strong>{{ game_record_number }}</strong>
                </div>
              </div>
            </div>
          </div>
          <div class="welcome-image">
            <img src="https://img.freepik.com/free-vector/dashboard-analytics-concept-illustration_114360-745.jpg" alt="æ¬¢è¿å›¾ç‰‡" />
          </div>
        </div>

        <!-- åŠŸèƒ½å¡ç‰‡ -->
        <div class="dashboard-grid">
          <div class="dashboard-card">
            <div class="card-icon bg-blue-100">
              <div class="text-icon">P</div>
            </div>
            <h3>ä¸ªäººç½‘ç›˜</h3>
            <p>å­˜å‚¨å’Œç®¡ç†æ‚¨çš„æ‰€æœ‰æ–‡ä»¶</p>
            <a href="#" class="card-link">è®¿é—®ç½‘ç›˜</a>
          </div>

          <div class="dashboard-card">
            <div class="card-icon bg-green-100">
              <div class="text-icon">R</div>
            </div>
            <h3>åœ¨çº¿é˜…è¯»</h3>
            <p>åœ¨æ— èŠæ—¶é˜…è¯»ä¸€äº›å°è¯´</p>
            <a href="http://zhenghao.x3322.net:38083" class="card-link">å¼€å§‹é˜…è¯»</a>
          </div>

          <div class="dashboard-card">
            <div class="card-icon bg-green-100">
              <div class="text-icon">C</div>
            </div>
            <h3>åœ¨çº¿èŠå¤©</h3>
            <p>ä¸æœ‹å‹å’ŒåŒäº‹å®æ—¶äº¤æµ</p>
            <a href="/chat" class="card-link">å¼€å§‹èŠå¤©</a>
          </div>

          <div class="dashboard-card">
            <div class="card-icon bg-purple-100">
              <div class="text-icon">B</div>
            </div>
            <h3>Bç«™è§†é¢‘è§£æ</h3>
            <p>è§£æå’Œä¸‹è½½Bç«™è§†é¢‘</p>
            <a href="/video_parse" class="card-link">ä½¿ç”¨å·¥å…·</a>
          </div>

          <div class="dashboard-card">
            <div class="card-icon bg-yellow-100">
              <div class="text-icon">G</div>
            </div>
            <h3>å°æ¸¸æˆåˆé›†</h3>
            <p>æ”¾æ¾ä¸€ä¸‹ï¼Œç©ç‚¹å°æ¸¸æˆ</p>
            <a href="#" class="card-link">å¼€å§‹æ¸¸æˆ</a>
          </div>

          <div class="dashboard-card">
            <div class="card-icon bg-red-100">
              <div class="text-icon">T</div>
            </div>
            <h3>æ–‡ä»¶è½¬æ¢</h3>
            <p>è½¬æ¢ä¸åŒæ ¼å¼çš„æ–‡ä»¶</p>
            <a href="/file_converter" class="card-link">è½¬æ¢æ–‡ä»¶</a>
          </div>

          <div class="dashboard-card">
            <div class="card-icon bg-indigo-100">
              <div class="text-icon">S</div>
            </div>
            <h3>ä½¿ç”¨ç»Ÿè®¡</h3>
            <p>æŸ¥çœ‹æ‚¨çš„ä½¿ç”¨æƒ…å†µæ•°æ®</p>
            <a href="#" class="card-link">æŸ¥çœ‹ç»Ÿè®¡</a>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- JavaScriptæ–‡ä»¶ -->
  <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
{% endblock %}